import time


def init(self):
    param_buf = bytearray()
    param_mv = memoryview(param_buf)

    self.reset()

    # SET password
    param_buf[:3] = bytearray([0xFF, 0x83, 0x69])
    self.set_params(0xB9, param_mv[:3])

    # SET Freq for fps
    param_buf[:2] = bytearray([0x01, 0x08])
    self.set_params(0xB0, param_mv[:2])

    # Set Power
    param_buf[:19] = bytearray([
        0x85, 0x00, 0x34, 0x0A, 0x00, 0x0F, 0x0F, 0x2A, 0x32, 0x3F,
        0x3F, 0x01, 0x23, 0x01, 0xE6, 0xE6, 0xE6, 0xE6, 0xE6])
    self.set_params(0xB1, param_mv[:19])

    # SET Display  480x800
    param_buf[:15] = bytearray([
        0x00, 0x20, 0x03, 0x03, 0x70, 0x00, 0xFF, 0x06,
        0x00, 0x00, 0x00, 0x03, 0x03, 0x00, 0x01])
    self.set_params(0xB2, param_mv[:15])

    # SET Display  column inversion
    param_buf[:5] = bytearray([0x00, 0x18, 0x80, 0x06, 0x02])
    self.set_params(0xB4, param_mv[:5])

    # SET VCOM
    param_buf[:2] = bytearray([0x3A, 0x3A])
    self.set_params(0xB6, param_mv[:2])

    param_buf[:26] = bytearray([
        0x00, 0x02, 0x03, 0x00, 0x01, 0x03, 0x28, 0x70, 0x01,
        0x03, 0x00, 0x00, 0x40, 0x06, 0x51, 0x07, 0x00, 0x00,
        0x41, 0x06, 0x50, 0x07, 0x07, 0x0F, 0x04, 0x00])
    self.set_params(0xD5, param_mv[:26])

    # Set Gamma
    param_buf[:34] = bytearray([
        0x00, 0x13, 0x19, 0x38, 0x3D, 0x3F, 0x28, 0x46, 0x07,
        0x0D, 0x0E, 0x12, 0x15, 0x12, 0x14, 0x0F, 0x17, 0x00,
        0x13, 0x19, 0x38, 0x3D, 0x3F, 0x28, 0x46, 0x07, 0x0D,
        0x0E, 0x12, 0x15, 0x12, 0x14, 0x0F, 0x17])
    self.set_params(0xE0, param_mv[:34])

    # Set DGC
    param_buf[:127] = bytearray([
        0x01, 0x04, 0x13, 0x1A, 0x20, 0x27, 0x2C, 0x32, 0x36, 0x3F, 0x47,
        0x50, 0x59, 0x60, 0x68, 0x71, 0x7B, 0x82, 0x89, 0x91, 0x98, 0xA0,
        0xA8, 0xB0, 0xB8, 0xC1, 0xC9, 0xD0, 0xD7, 0xE0, 0xE7, 0xEF, 0xF7,
        0xFE, 0xCF, 0x52, 0x34, 0xF8, 0x51, 0xF5, 0x9D, 0x75, 0x00, 0x04,
        0x13, 0x1A, 0x20, 0x27, 0x2C, 0x32, 0x36, 0x3F, 0x47, 0x50, 0x59,
        0x60, 0x68, 0x71, 0x7B, 0x82, 0x89, 0x91, 0x98, 0xA0, 0xA8, 0xB0,
        0xB8, 0xC1, 0xC9, 0xD0, 0xD7, 0xE0, 0xE7, 0xEF, 0xF7, 0xFE, 0xCF,
        0x52, 0x34, 0xF8, 0x51, 0xF5, 0x9D, 0x75, 0x00, 0x04, 0x13, 0x1A,
        0x20, 0x27, 0x2C, 0x32, 0x36, 0x3F, 0x47, 0x50, 0x59, 0x60, 0x68,
        0x71, 0x7B, 0x82, 0x89, 0x91, 0x98, 0xA0, 0xA8, 0xB0, 0xB8, 0xC1,
        0xC9, 0xD0, 0xD7, 0xE0, 0xE7, 0xEF, 0xF7, 0xFE, 0xCF, 0x52, 0x34,
        0xF8, 0x51, 0xF5, 0x9D, 0x75, 0x00])
    self.set_params(0xC1, param_mv[:127])

    # set Interface Pixel Format
    # 0x07=24 Bit/Pixel; 0x06=18 Bit/Pixel; 0x05=16 Bit/Pixel
    param_buf[0] = 0x07
    self.set_params(0x3A, param_mv[:1])

    # write display brightness
    # set brightness 0x00-0xff
    param_buf[0] = 0x00
    self.set_params(0x51, param_mv[:1])
    time.sleep_ms(50)  # NOQA

    # write ctrl display
    param_buf[0] = 0x24
    self.set_params(0x53, param_mv[:1])
    time.sleep_ms(50)  # NOQA

    # still picture
    param_buf[0] = 0x01
    self.set_params(0x55, param_mv[:1])
    time.sleep_ms(50)  # NOQA

    # write CABC minumum brightness
    param_buf[0] = 0x70
    self.set_params(0x5e, param_mv[:1])
    time.sleep_ms(50)  # NOQA

    # Set UI GAIN
    param_buf[:10] = bytearray([
        0x24, 0x24, 0x24, 0x23, 0x23, 0x23, 0x22, 0x22, 0x22, 0x22
    ])
    self.set_params(0xCA, param_mv[:10])

    self.set_params(0x11)
    time.sleep_ms(120)  # NOQA

    # Set TE register
    param_buf[0] = 0x00
    self.set_params(0x35, param_mv[:1])

    # Set TE signal delay scanline
    param_buf[:4] = bytearray([0x00, 0x00, 0x00, 0x00])
    self.set_params(0X0044, param_mv[:4])
